<html>
<head>
  <title>Wiki test scaffolding</title>
</head>
<body>

  <div id=placeholder></div>

  <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
  <script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
  <script src="iframe-plugin-host.js"></script>
  <script>
    var $plugin = $( '#placeholder' )
      .iframePluginHost( '../example-data-plugin/index.html', 800, 600 )
      .on( 'iframePluginEvent:loaded', function( event ) {
        // @todo implement this event & demo it
        // One-shot event notification from the plugin.
        console.log( 'plugin loaded', event.data );
      } )
      .on( 'iframePluginRequest:info', function( event ) {
        // @todo implement this event & demo it
        // Initiation of a request for data or action from the plugin
        console.log( 'plugin info request', event.data );

        // Treat it like a $.Deferred
        event.response.resolve( {
          url: 'https://www.wikidata.org/wiki/Q2766',
          title: 'Q2766'
        } );
      } );

    $( '#doSomething' ).on( 'click', function( event ) {
      // @todo implement this ability & demo it
      $plugin.iframePluginSend( {
        action: 'doSomething'
      } ).then( function( data ) {
        console.log( 'plugin returned data for doSomething:', data );
      } );
    } );
  </script>

</body>
</html>
